(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3310:function(e,t,n){Promise.resolve().then(n.bind(n,4946)),Promise.resolve().then(n.bind(n,3109)),Promise.resolve().then(n.bind(n,5628))},4946:function(e,t,n){"use strict";n.d(t,{Bar:function(){return i}});var s=n(7437);function l(e){let{children:t,type:n="button",description:l="",...r}=e;return(0,s.jsxs)("button",{className:"py-2 px-3 text-end inline-block ".concat("submit"===n?"submit-button":""),type:"button",...r,children:[(0,s.jsx)("span",{className:"uppercase text-md font-bold",children:t}),l&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("br",{})," ",(0,s.jsx)("span",{className:"text-sm",children:l})]})]})}var r=n(2265),o=n(8458),a=n(8771);function i(){let{current:e,setCurrent:t}=(0,r.useContext)(a.l),n=-1!==e,{setEditing:i}=(0,r.useContext)(o.l);return(0,s.jsxs)("div",{className:"bar fixed bottom-0 left-0 w-full px-5 py-2 border-t-2 flex gap-2",children:[!n&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l,{type:"submit",children:["ADICIONAR",(0,s.jsx)("br",{}),"PRODUTO"]}),(0,s.jsx)(l,{type:"submit",description:"ordenado por nome",children:"ORDENAR"})]}),n&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l,{type:"submit",onClick:()=>i(!0),children:["EDITAR",(0,s.jsx)("br",{}),"PRODUTO"]}),(0,s.jsxs)(l,{children:["REMOVER",(0,s.jsx)("br",{}),"PRODUTO"]}),(0,s.jsx)(l,{onClick:()=>{t(-1)},children:"CANCELAR"})]})]})}},3109:function(e,t,n){"use strict";n.d(t,{Dialog:function(){return m}});var s=n(7437),l=n(2265),r=n(8458);function o(e){let{label:t="",setValue:n,...l}=e;return(0,s.jsxs)("div",{className:"form-control",children:[(0,s.jsx)("label",{className:"label",htmlFor:l.id,children:t}),(0,s.jsx)("input",{className:"input",type:"text",onChange:e=>n(e.target.value),...l})]})}function a(e){let{label:t="",setValue:n,...r}=e,o=(0,l.useRef)(),a=null==o?void 0:o.current,i=a?null==a?void 0:a.valueAsNumber:0;return(0,s.jsxs)("div",{className:"form-control",children:[(0,s.jsx)("label",{className:"label",htmlFor:r.id,children:t}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{type:"button",onClick:()=>n(i-1),className:"button-control",children:"-"}),(0,s.jsx)("input",{onChange:e=>n(e.target.value),ref:o,className:"input appearance-none text-center",type:"number",...r}),(0,s.jsx)("button",{type:"button",onClick:()=>n(i+1),className:"button-control",children:"+"})]})]})}var i=n(182);function c(e){let{label:t="",setValue:n,...r}=e,{values:o=[]}=(0,l.useContext)(i.O),a=Array.isArray(o)?o:[],c=null==a?void 0:a.map(e=>(0,s.jsx)("option",{children:e},e));return(0,s.jsxs)("div",{className:"form-control",children:[(0,s.jsx)("label",{className:"label",htmlFor:r.id,children:t}),(0,s.jsx)("select",{className:"input",onChange:e=>n(e.target.value),...r,children:c})]})}var u=n(8003),d=n(8771);function h(){let{setEditing:e}=(0,l.useContext)(r.l),{current:t}=(0,l.useContext)(d.l),{sheets:n,setSheets:i}=(0,l.useContext)(u.X),h=Array.isArray(n)?n:[],m=h[t]||{};(0,l.useEffect)(()=>{h.length&&(f(m[0]||""),g(Number(m[1])||""),v(m[2]||""),y(m[3]||""))},[t]);let[p,f]=(0,l.useState)(m[0]||""),[x,g]=(0,l.useState)(Number(m[1])||""),[b,v]=(0,l.useState)(m[2]||""),[j,y]=(0,l.useState)(m[3]||""),N=(0,l.useCallback)(n=>{n.preventDefault(),i(h.map((e,n)=>n!==t?e:[p,String(x),b,j])),e(!1)},[t,h,p,x,b,j,i,e]);return(0,s.jsxs)("form",{onSubmit:N,children:[(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,s.jsx)("div",{className:"col-span-2",children:(0,s.jsx)(o,{id:"name",label:"nome do produto",value:p,setValue:f})}),(0,s.jsx)(a,{id:"quantity",value:x,setValue:g,label:"quantidade"}),(0,s.jsx)("div",{className:"col-span-2",children:(0,s.jsx)(c,{id:"supplier",label:"fornecedor",value:b,setValue:v})}),(0,s.jsx)(o,{id:"price",value:j,setValue:y,label:"pre\xe7o"})]}),(0,s.jsxs)("footer",{className:"flex justify-end gap-2 mt-2",children:[(0,s.jsx)("button",{type:"button",onClick:()=>e(!1),children:"cancelar"}),(0,s.jsx)("button",{type:"submit",children:"salvar"})]})]})}function m(){let{editing:e,setEditing:t}=(0,l.useContext)(r.l),n=(0,l.useRef)(),o=null==n?void 0:n.current;return(0,l.useEffect)(()=>{if(e){null==o||o.showModal();return}null==o||o.close()},[e]),(0,s.jsx)("dialog",{ref:n,onClose:()=>t(!1),children:(0,s.jsx)(h,{})})}},5628:function(e,t,n){"use strict";n.d(t,{Table:function(){return a}});var s=n(7437),l=n(2265),r=n(8003),o=n(8771);function a(){let{current:e,setCurrent:t}=(0,l.useContext)(o.l),{sheets:n}=(0,l.useContext)(r.X),a=Array.isArray(n)?n:[];return(0,s.jsxs)("table",{className:"table-auto w-full",children:[(0,s.jsx)("thead",{className:"rounded-lg",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"th",children:"produto"}),(0,s.jsx)("th",{className:"th",children:"quant"}),(0,s.jsx)("th",{className:"th",children:"fornecedor"}),(0,s.jsx)("th",{className:"th w-28",children:"pre\xe7o"})]})}),(0,s.jsx)("tbody",{children:a.map((n,l)=>(0,s.jsxs)("tr",{className:"tr relative",children:[(0,s.jsxs)("td",{className:"td",children:[n[0],(0,s.jsx)("input",{type:"radio",style:{scale:"initial"},className:"appearance-none absolute inset-0 border-0 bg-transparent m-0 p-0",onClick:()=>e===l&&t(-1),onChange:()=>t(e===l?-1:l),checked:e===l,name:"product",value:n[0]},n[0])]}),(0,s.jsx)("td",{className:"td",children:n[1]}),(0,s.jsx)("td",{className:"td",children:n[2]}),(0,s.jsx)("td",{className:"td",children:n[3]})]},l))})]})}},8771:function(e,t,n){"use strict";n.d(t,{CurrentProvider:function(){return a},l:function(){return o}});var s=n(7437),l=n(2265),r=n(2866);let o=(0,l.createContext)({current:-1,setCurrent:r.rf});function a(e){let{children:t}=e,[n,r]=(0,l.useState)(-1);return(0,l.useEffect)(()=>{document.addEventListener("scroll",()=>{r(-1)})},[]),(0,s.jsx)(o.Provider,{value:{current:n,setCurrent:r},children:t})}},8458:function(e,t,n){"use strict";n.d(t,{EditingItemProvider:function(){return a},l:function(){return o}});var s=n(7437),l=n(2265),r=n(2866);let o=(0,l.createContext)({editing:!1,setEditing:r.g7});function a(e){let{children:t}=e,[n,r]=(0,l.useState)(!1);return(0,s.jsx)(o.Provider,{value:{editing:n,setEditing:r},children:t})}},1502:function(e,t,n){"use strict";let s;n.d(t,{D:function(){return o},GoogleLogin:function(){return i}});var l=n(7437),r=n(2265);let o=(0,r.createContext)({}),a=!1;function i(e){let{children:t}=e,[n,i]=(0,r.useState)(),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(!1);(0,r.useRef)(),(0,r.useRef)();let m=(0,r.useCallback)(()=>{s=google.accounts.oauth2.initTokenClient({client_id:"769211696215-h4sqth8dh20qp8b30noglr80ntcq6it2.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/spreadsheets",callback:console.log}),h(!0),x()},[]),p=(0,r.useCallback)(()=>{let e=localStorage.getItem("token");if(e){let t=JSON.parse(e);gapi.client.setToken(t),i(t)}},[]),f=(0,r.useCallback)(async()=>{await gapi.client.init({apiKey:"AIzaSyDTpv2UEpHxaftIQXXETkogbHZpeT5C480",discoveryDocs:["https://sheets.googleapis.com/$discovery/rest?version=v4"]}),u(!0),x(),p()},[]);function x(){c&&d&&(document.getElementById("authorize_button").style.visibility="visible")}let g=(0,r.useCallback)(()=>{console.log("gapiLoaded"),gapi.load("client",f)},[]),b=(0,r.useCallback)(()=>{s.callback=async e=>{if(void 0!==e.error)throw e;i(e),localStorage.setItem("token",JSON.stringify(gapi.client.getToken())),document.getElementById("signout_button").style.visibility="visible",document.getElementById("authorize_button").innerText="Refresh"},null===gapi.client.getToken()?s.requestAccessToken({prompt:"consent"}):s.requestAccessToken({prompt:""})},[]),v=(0,r.useCallback)(()=>{let e=gapi.client.getToken();null!==e&&(google.accounts.oauth2.revoke(e.access_token),gapi.client.setToken(""),document.getElementById("content").innerText="",document.getElementById("authorize_button").innerText="Authorize",document.getElementById("signout_button").style.visibility="hidden")},[]),j=(0,r.useCallback)(()=>{let e=document.createElement("script"),t=document.createElement("script");e.src="https://apis.google.com/js/api.js",t.src="https://accounts.google.com/gsi/client",e.onload=g,t.onload=m,document.body.appendChild(e),document.body.appendChild(t)},[]);return(0,r.useEffect)(()=>{a||(a=!0,j())},[]),(0,l.jsxs)(o.Provider,{value:n,children:[(0,l.jsx)("button",{id:"authorize_button",onClick:b,children:"Authorize"}),(0,l.jsx)("button",{id:"signout_button",onClick:v,children:"Sign Out"}),t]})}},8003:function(e,t,n){"use strict";n.d(t,{StockSheetsProvider:function(){return c},X:function(){return a}});var s=n(7437),l=n(2265),r=n(1502),o=n(2866);let a=(0,l.createContext)({sheets:[],setSheets:o.zk}),i="1medi4MSrVKLXKm6TYT62zFMTftt99D40Nwxv_xB6NTY";function c(e){let{children:t}=e,n=(0,l.useRef)(!1),o=(0,l.useContext)(r.D),[c,u]=(0,l.useState)([]);async function d(){let e;try{e=await gapi.client.sheets.spreadsheets.values.get({spreadsheetId:i,range:"estoque!A2:E"})}catch(e){document.getElementById("content").innerText=e.message;return}let t=e.result;if(!t||!t.values||0==t.values.length){console.log("No data found.");return}u(e.result.values||[]),setTimeout(()=>{n.current=!0},100)}async function h(){try{await gapi.client.sheets.spreadsheets.values.update({spreadsheetId:i,range:"estoque!A2:E",valueInputOption:"USER_ENTERED",resource:{values:c}})}catch(e){console.log(e)}}return(0,l.useEffect)(()=>{n.current&&(console.log(c),h())},[c]),(0,l.useEffect)(()=>{o&&d()},[o]),(0,s.jsx)(a.Provider,{value:{sheets:c,setSheets:u},children:t})}},182:function(e,t,n){"use strict";n.d(t,{O:function(){return o},SupplierSheetsProvider:function(){return a}});var s=n(7437),l=n(2265),r=n(1502);let o=(0,l.createContext)({values:[]});function a(e){let{children:t}=e,n=(0,l.useContext)(r.D),[a,i]=(0,l.useState)([]);async function c(){let e;try{e=await gapi.client.sheets.spreadsheets.values.get({spreadsheetId:"1medi4MSrVKLXKm6TYT62zFMTftt99D40Nwxv_xB6NTY",range:"fornecedores!A2:A"})}catch(e){document.getElementById("content").innerText=e.message;return}let t=e.result;if(!t||!t.values||0==t.values.length){console.log("No data found.");return}i(e.result)}return(0,l.useEffect)(()=>{n&&c()},[n]),(0,s.jsx)(o.Provider,{value:a,children:t})}},2866:function(e,t,n){"use strict";n.d(t,{g7:function(){return s},rf:function(){return l},zk:function(){return r}});let s=()=>{},l=()=>{},r=()=>{}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=3310)}),_N_E=e.O()}]);